:root {
  --bg: #f5f6f8;
  --surface: #fff;
  --border: #e2e4e8;
  --primary: #0078d4;
  --primary-hover: #106ebe;
  --text: #323130;
  --text-muted: #605e5c;
  --success: #107c10;
  --error: #d13438;
  --radius: 8px;
  --shadow: 0 1px 3px rgba(0,0,0,.08);
}

* { box-sizing: border-box; }
body { margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif; background: var(--bg); color: var(--text); min-height: 100vh; }
a { color: var(--primary); text-decoration: none; }
a:hover { text-decoration: underline; }
button { cursor: pointer; font: inherit; }
input, select, textarea { font: inherit; }

.app { display: flex; flex-direction: column; min-height: 100vh; }
.app-header { background: var(--surface); border-bottom: 1px solid var(--border); padding: 12px 20px; display: flex; align-items: center; justify-content: space-between; }
.app-header h1 { margin: 0; font-size: 1.25rem; }
.app-nav { display: flex; gap: 8px; flex-wrap: wrap; }
.app-nav a { padding: 6px 12px; border-radius: var(--radius); color: var(--text); }
.app-nav a:hover { background: var(--bg); }
.app-nav a.active { background: var(--primary); color: #fff; }
.main { flex: 1; padding: 20px; max-width: 1400px; margin: 0 auto; width: 100%; }

.card { background: var(--surface); border-radius: var(--radius); box-shadow: var(--shadow); padding: 16px; margin-bottom: 16px; }
.btn { display: inline-flex; align-items: center; justify-content: center; padding: 8px 16px; border-radius: var(--radius); border: none; background: var(--primary); color: #fff; }
.btn:hover { background: var(--primary-hover); }
.btn-secondary { background: var(--border); color: var(--text); }
.btn-secondary:hover { background: #d0d2d6; }
.btn-block { width: 100%; }
.btn-primary { background: var(--primary); color: #fff; }
.btn-primary:hover { background: var(--primary-hover); }
.loading { color: var(--text-muted); }

/* Login page */
.login-page { display: flex; align-items: center; justify-content: center; min-height: 100vh; padding: 20px; }
.login-card { max-width: 400px; width: 100%; }
.login-card h2 { margin: 0 0 8px; }
.login-divider { display: flex; align-items: center; gap: 12px; margin: 20px 0; color: var(--text-muted); font-size: 14px; }
.login-divider::before, .login-divider::after { content: ''; flex: 1; height: 1px; background: var(--border); }
.login-form { margin-top: 0; }
.error { color: var(--error); }
.form-group { margin-bottom: 12px; }
.form-group label { display: block; margin-bottom: 4px; font-weight: 500; }
.form-group input, .form-group select, .form-group textarea { width: 100%; padding: 8px 12px; border: 1px solid var(--border); border-radius: var(--radius); }

.modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,.4); display: flex; align-items: center; justify-content: center; z-index: 100; }
.modal { background: var(--surface); border-radius: var(--radius); padding: 24px; max-width: 480px; width: 90%; max-height: 90vh; overflow: auto; }
.modal h3 { margin-top: 0; }
.modal-actions { margin-top: 16px; display: flex; gap: 8px; justify-content: flex-end; }

.grid-3 { display: grid; grid-template-columns: 1fr 2fr 1fr; gap: 20px; }
@media (max-width: 900px) { .grid-3 { grid-template-columns: 1fr; } }

.widget-list { list-style: none; padding: 0; margin: 0; }
.widget-list li { padding: 8px 0; border-bottom: 1px solid var(--border); display: flex; align-items: center; justify-content: space-between; }
.widget-list li:last-child { border-bottom: none; }

.copilot-message { padding: 10px 12px; border-radius: var(--radius); margin-bottom: 8px; }
.copilot-message.user { background: #e8f4fc; margin-left: 24px; }
.copilot-message.assistant { background: var(--surface); border: 1px solid var(--border); }
.copilot-message .confidence { font-size: 0.85rem; color: var(--text-muted); margin-top: 4px; }

.task-item { display: flex; align-items: center; gap: 10px; padding: 10px 0; border-bottom: 1px solid var(--border); }
.task-item:last-child { border-bottom: none; }
.task-item input[type="checkbox"] { width: 18px; height: 18px; }
.task-item.done { opacity: 0.7; }
.task-item.done .task-title { text-decoration: line-through; }

.event-item { padding: 8px 0; border-bottom: 1px solid var(--border); }
.event-item:last-child { border-bottom: none; }

.quiz-option { display: block; width: 100%; text-align: left; padding: 10px 12px; margin-bottom: 6px; border: 1px solid var(--border); border-radius: var(--radius); background: var(--surface); cursor: pointer; }
.quiz-option:hover { border-color: var(--primary); }
.quiz-option.selected { border-color: var(--primary); background: #e8f4fc; }

.language-select { min-width: 160px; }

/* Pricing */
.pricing-page { max-width: 960px; margin: 0 auto; }
.pricing-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 20px; margin-top: 24px; }
.pricing-card { position: relative; background: var(--surface); border-radius: var(--radius); box-shadow: var(--shadow); padding: 24px; border: 2px solid var(--border); display: flex; flex-direction: column; }
.pricing-card-highlight { border-color: var(--primary); }
.pricing-card-current { border-color: var(--success); background: rgba(16, 124, 16, 0.06); }
.pricing-badge { position: absolute; top: -10px; right: 16px; background: var(--primary); color: #fff; font-size: 12px; padding: 4px 10px; border-radius: 999px; }
.pricing-card h3 { margin: 0 0 4px; font-size: 1.25rem; }
.pricing-subtitle { margin: 0 0 16px; font-size: 14px; color: var(--text-muted); }
.pricing-price { margin-bottom: 16px; }
.pricing-amount { font-size: 1.75rem; font-weight: 700; }
.pricing-period { font-size: 14px; color: var(--text-muted); margin-left: 2px; }
.pricing-features { list-style: none; padding: 0; margin: 0 0 20px; flex: 1; }
.pricing-features li { padding: 6px 0; border-bottom: 1px solid var(--border); font-size: 14px; }
.pricing-features li:last-child { border-bottom: none; }

/* Copilot limit CTA */
.copilot-limit-cta { background: #fff8e6; border: 1px solid #f0c674; border-radius: var(--radius); padding: 12px 16px; margin-bottom: 12px; font-size: 14px; }
.copilot-limit-cta a { font-weight: 600; }

/* Copilot suggestion cards */
.suggestion-cards { display: flex; flex-direction: column; gap: 10px; }
.suggestion-card { background: var(--bg); border: 1px solid var(--border); border-radius: var(--radius); padding: 10px 12px; font-size: 14px; }
.suggestion-card-type { font-weight: 600; color: var(--primary); text-transform: capitalize; margin-bottom: 4px; }
.suggestion-card-label { color: var(--text); margin-bottom: 4px; }
.suggestion-card-preview { color: var(--text-muted); font-size: 12px; font-family: monospace; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 100%; margin-bottom: 8px; }
.suggestion-card-actions { display: flex; gap: 8px; justify-content: flex-end; }
.suggestion-card-actions .btn { padding: 6px 12px; font-size: 13px; }

/* Calendar: assignment deadlines (all-day) vs regular events */
.fc-event-assignment { background: #c65911 !important; border-color: #8a3d09 !important; }
.fc-event-assignment:hover { background: #a34a0e !important; }

/* Analytics dashboard (admin/teacher) */
.analytics-heatmap-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}
.analytics-heatmap-cell {
  min-width: 80px;
  padding: 10px 12px;
  border-radius: var(--radius);
  border: 1px solid rgba(0,0,0,.08);
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
}
.analytics-heatmap-label { font-size: 11px; color: var(--text-muted); }
.analytics-heatmap-value { font-weight: 700; font-size: 14px; }
.analytics-bars { display: flex; flex-direction: column; gap: 10px; }
.analytics-bar-row {
  display: grid;
  grid-template-columns: 100px 1fr 80px;
  align-items: center;
  gap: 12px;
}
.analytics-bar-label { font-size: 14px; }
.analytics-bar-track {
  height: 24px;
  background: var(--bg);
  border-radius: 6px;
  overflow: hidden;
}
.analytics-bar-fill {
  height: 100%;
  background: linear-gradient(90deg, #c8e6c9, #81c784);
  border-radius: 6px;
  min-width: 4px;
  transition: width .3s ease;
}
.analytics-bar-fill-primary { background: linear-gradient(90deg, var(--primary), #4a9fd4); }
.analytics-bar-value { font-size: 14px; font-weight: 600; text-align: right; }

@media print {
  .app-header, .btn, .app-nav button { display: none !important; }
  .main { padding: 0; }
  .card { break-inside: avoid; }
}
